[pytest]
# Test discovery and execution
python_files = test_*.py
python_classes = Test*
python_functions = test_*
testpaths = test

# Markers for test categorization and optimization
markers =
    unit: Fast unit tests with minimal dependencies (< 100ms)
    integration: Integration tests that involve multiple components (100ms - 1s)
    slow: Slow tests that may take > 1s (database-heavy, network, large fixtures)
    db: Tests that perform database operations (likely slow)
    api: API endpoint tests
    performance: Performance or benchmark tests
    security: Security-related tests
    architecture: Architecture validation tests
    concurrent: Concurrent/threading tests
    io: File I/O tests
    network: Network/external service tests
    very_slow: Tests known to take > 5 seconds

# Timeout configuration
timeout = 30
timeout_method = thread

# Output options
addopts =
    -ra
    --strict-markers
    --disable-warnings

# Coverage configuration
[coverage:run]
source = src/actifix
omit =
    */tests/*
    */test_*
    */conftest.py
    */__main__.py

[coverage:report]
fail_under = 95
show_missing = true
precision = 2
